# xml-sitemap

> Utilities for quickly making custom XML sitemaps

## Install

Add it to a project with `npm`:
```sh
$ npm install xml-sitemap --save
```

Then just `require` it in your project:
```js
var XmlSitemap = require('xml-sitemap');
var sitemap = new XmlSitemap();
```

## Basic Usage

For more info on anything check out the [docs](#api).

### Build a sitemap from scratch

```js
var sitemap = new XmlSitemap();

// add a url
sitemap.add('http://domain.com/');

// we can also add options, add multiple urls at once, and chain together methods
sitemap.add('http://domain.com/magic', {lastmod: 'now', priority: 0.8})
  .add([
    'http://domain.com/another-page',
    {
      url: 'http://domain.com/sitemapz-rule',
      changefreq: 'never',
      lastmod: '1999-12-31'
    }
  ])
  .updateLastmod('http://domain.com/', new Date())
  .setOptionValue('http://domain.com/sitemapz-rule', 'priority', 1);


  // an array of the urls is in sitemap.urls
  console.log(sitemap.urls);
  // [ 'http://domain.com/', 'http://domain.com/magic', 'http://domain.com/another-page', 'http://domain.com/sitemapz-rule' ]

  // and the xml is in sitemap.xml
  require('fs').writeFileSync('sitemap.xml', sitemap.xml)

// we can also get individual attributes
sitemap.hasUrl('http://domain.com/another-page'); // true
sitemap.getOptionValue('http://domain.com/', 'lastmod'); // {today's date!}
sitemap.getOptionValue('http://domain.com/magic', 'lastmod'); // {today's date!}
sitemap.getOptionValue('http://domain.com/another-page', 'lastmod'); // null
```

### Read in an existing sitemap

(Like the one we made above!)

```js
// get the XML as a string
var xmlString = require('fs').readFileSync('sitemap.xml');

// and pass it to the constructor
var sitemap = new XmlSitemap(xmlString);

sitemap.hasUrl('http://domain.com/magic'); // true

sitemap.remove('http://domain.com/another-page')
  .setOptionValues('http://domain.com/magic', {lastmod: '2012-12-21', priority: 0.9});

sitemap.hasUrl('http://domain.com/another-page'); // false
sitemap.getOptionValue('http://domain.com/magic', 'priority'); // '0.9'
sitemap.getOptionValue('http://domain.com/magic', 'lastmod'); // '2012-12-21'

sitemap.updateLastmod('http://domain.com/magic');
sitemap.getOptionValue('http://domain.com/magic', 'lastmod'); // {today's date}
```

## API
{{#class name="XmlSitemap"}}
{{>body~}}
{{>member-index~}}
{{>separator~}}
{{>members~}}
{{/class}}

## Licence
MIT &copy; 2016 [Robert Pirtle](https://pirtle.xyz)
